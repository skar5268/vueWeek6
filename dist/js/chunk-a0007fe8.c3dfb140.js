(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0007fe8"],{"6cb0":function(t,e,c){"use strict";var a=c("7a23"),o={class:"modal-dialog  modal-dialog-centered"},l={class:"modal-content border-0 border-bottom border-success border-5"},r={class:"d-flex justify-content-between align-items-center\n          flex-column py-5 mb-0 text-success",role:"alert"},n=Object(a["f"])("p",{class:"material-icons-round h1 mb-3 alert-icon"},"check_circle",-1),d={class:"h3 fw-bold px-4"},s={class:"mb-4"};function i(t,e,c,i,b,u){return Object(a["r"])(),Object(a["d"])("div",o,[Object(a["f"])("div",l,[Object(a["f"])("div",r,[n,Object(a["f"])("p",d,Object(a["z"])(c.alertTitle),1),Object(a["f"])("p",s,Object(a["z"])(c.alertMessage),1),Object(a["f"])("button",{type:"button",class:"btn btn-success w-25 mt-2 mb-1",onClick:e[1]||(e[1]=Object(a["J"])((function(){return u.nextAction&&u.nextAction.apply(u,arguments)}),["prevent"]))}," 確認 ")])])])}var b={props:["alertTitle","alertMessage"],methods:{nextAction:function(){this.$emit("action")}}};b.render=i;e["a"]=b},"6ff1":function(t,e,c){"use strict";var a=c("7a23"),o={class:"modal-dialog modal-md  modal-dialog-centered"},l={class:"modal-content border-0"},r={class:"modal-header bg-danger py-2"},n={class:"modal-title fw-bold text-light lh-sm"},d=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"delete_forever",-1),s=Object(a["f"])("button",{type:"button",class:"btn text-light","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["f"])("span",{class:"material-icons-round lh-base"},"close")],-1),i={class:"modal-body py-4"},b=Object(a["e"])(" 確定要刪除 "),u={class:"fw-bold text-danger"},f=Object(a["e"])(" 商品嗎？ "),m={class:"modal-footer"},p=Object(a["f"])("button",{type:"button",class:"btn border-primary","data-bs-dismiss":"modal"},"取消",-1);function O(t,e,c,O,j,h){return Object(a["r"])(),Object(a["d"])("div",o,[Object(a["f"])("div",l,[Object(a["f"])("div",r,[Object(a["f"])("h5",n,[d,Object(a["e"])(" "+Object(a["z"])(c.modalTitle),1)]),s]),Object(a["f"])("div",i,[Object(a["f"])("p",null,[b,Object(a["f"])("span",u,Object(a["z"])(c.title),1),f])]),Object(a["f"])("div",m,[p,Object(a["f"])("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=Object(a["J"])((function(){return h.delProduct&&h.delProduct.apply(h,arguments)}),["prevent"]))}," 確認刪除 ")])])])}c("b0c0"),c("99af");var j=c("bc3a"),h=c.n(j),g={props:["newProduct","modalTitle","products","title"],methods:{delProduct:function(){var t,e=this,c="pingu",a="https://vue-course-api.hexschool.io/api",o=this.$router.currentRoute.value.name;"BgProducts"===o?t="".concat(a,"/").concat(c,"/admin/product/").concat(this.newProduct.id):"Carts"===o&&(t="".concat(a,"/").concat(c,"/cart/").concat(this.newProduct.id)),h.a.delete(t).then((function(t){t.data.success?e.$emit("update","success",0,t.data.message):e.$emit("getError","error",0,t.data.message)})).catch((function(t){e.$emit("getError","error",0,t.message)}))}}};g.render=O;e["a"]=g},afe6:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={class:"container mt-5"},l={class:"row g-0 mb-5"},r=Object(a["f"])("h2",{class:"col-12 col-md-8 text-center text-md-start fw-bold mb-3 mb-md-0"},"商品管理頁面",-1),n={class:"col-12 col-md-4 text-center text-md-end"},d=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"add",-1),s=Object(a["e"])(" 建立新的商品 "),i={class:"row"},b={class:"table table-striped table-borderless table-hover align-middle mb-5"},u=Object(a["f"])("thead",{class:"text-center"},[Object(a["f"])("tr",null,[Object(a["f"])("th",{scope:"col"},"分類"),Object(a["f"])("th",{scope:"col"},"商品名稱"),Object(a["f"])("th",{scope:"col"},"原價"),Object(a["f"])("th",{scope:"col"},"售價"),Object(a["f"])("th",{scope:"col"},"單位"),Object(a["f"])("th",{scope:"col"},"是否啟用"),Object(a["f"])("th",{scope:"col",colspan:"2",class:"text-center"},"編輯")])],-1),f={scope:"row"},m=Object(a["f"])("span",{class:"h5 material-icons-round align-bottom mb-0"},"mode",-1),p=Object(a["e"])(" 編輯 "),O=Object(a["f"])("span",{class:"h5 material-icons-round align-bottom mb-0"},"delete_forever",-1),j=Object(a["e"])(" 刪除 "),h={class:"modal fade",tabindex:"-1",id:"productModal",ref:"productModal"},g={class:"modal fade",tabindex:"-1",id:"delProductModal",ref:"delProductModal"},v={class:"modal fade",tabindex:"-1",id:"errorModal",ref:"errorModal"},w={class:"modal fade",tabindex:"-1",id:"successModal",ref:"successModal"};function P(t,e,c,P,y,k){var x=Object(a["w"])("page-navigation"),M=Object(a["w"])("edit-modal"),U=Object(a["w"])("del-modal"),z=Object(a["w"])("error-alert-modal"),C=Object(a["w"])("success-alert-modal");return Object(a["r"])(),Object(a["d"])(a["a"],null,[Object(a["f"])("div",o,[Object(a["f"])("div",l,[r,Object(a["f"])("div",n,[Object(a["f"])("button",{class:"btn btn-primary mb-3",onClick:e[1]||(e[1]=function(t){return k.openModal("new")})},[d,s])])]),Object(a["f"])("div",i,[Object(a["f"])("table",b,[u,Object(a["f"])("tbody",null,[(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(y.products,(function(t){return Object(a["r"])(),Object(a["d"])("tr",{key:t.id,class:"text-center"},[Object(a["f"])("th",f,Object(a["z"])(t.category),1),Object(a["f"])("td",null,Object(a["z"])(t.title),1),Object(a["f"])("td",null,"$ "+Object(a["z"])(t.origin_price),1),Object(a["f"])("td",null,"$ "+Object(a["z"])(t.price),1),Object(a["f"])("td",null,Object(a["z"])(t.unit),1),Object(a["f"])("td",null,[Object(a["f"])("a",{href:"#",class:["fw-bold",t.is_enabled?"text-success":"text-danger"],onClick:Object(a["J"])((function(e){return k.changeEnabled(t)}),["prevent"])},Object(a["z"])(t.is_enabled?"啟用":"不啟用"),11,["onClick"])]),Object(a["f"])("td",null,[Object(a["f"])("button",{class:"btn btn-primary mb-2 mb-md-0",onClick:Object(a["J"])((function(e){return k.openModal("edit",t)}),["prevent"])},[m,p],8,["onClick"]),Object(a["f"])("button",{class:"btn btn-danger mx-0 mx-md-2",onClick:Object(a["J"])((function(e){return k.openModal("delete",t)}),["prevent"])},[O,j],8,["onClick"])])])})),128))])])]),Object(a["f"])(x,{"total-page":y.pagination.total_pages,"current-page":y.pagination.current_page,onUpdate:k.getData},null,8,["total-page","current-page","onUpdate"])]),Object(a["f"])("div",h,[Object(a["f"])(M,{"new-product":y.newProduct,"modal-title":y.modalTitle,products:y.products,onUpdate:k.openModal,onGetError:k.openModal},null,8,["new-product","modal-title","products","onUpdate","onGetError"])],512),Object(a["f"])("div",g,[Object(a["f"])(U,{"new-product":y.newProduct,"modal-title":y.modalTitle,products:y.products,title:y.newProduct.title,onUpdate:k.openModal,onGetError:k.openModal},null,8,["new-product","modal-title","products","title","onUpdate","onGetError"])],512),Object(a["f"])("div",v,[Object(a["f"])(z,{"alert-title":y.alertTitle,"alert-message":y.alertMessage},null,8,["alert-title","alert-message"])],512),Object(a["f"])("div",w,[Object(a["f"])(C,{"alert-title":y.alertTitle,"alert-message":y.alertMessage,onAction:k.updateData},null,8,["alert-title","alert-message","onAction"])],512)],64)}var y=c("5530"),k=(c("99af"),c("bc3a")),x=c.n(k),M=c("7b17"),U=c("66dd"),z=(c("a4d3"),c("e01a"),{class:"modal-dialog modal-lg  modal-dialog-centered"}),C={class:"modal-content border-0"},T={class:"modal-header bg-primary py-2"},_={class:"modal-title fw-bold text-light lh-sm"},E=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"mode",-1),$=Object(a["f"])("button",{type:"button",class:"btn text-light","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["f"])("span",{class:"material-icons-round lh-base"},"close")],-1),I={class:"modal-body py-4"},D={class:"container-fluid"},V={class:"row"},J={class:"col-12 col-md-4"},S={class:"mb-4"},A=Object(a["f"])("label",{for:"newImgUrl",class:"form-label d-block"},"輸入圖片網址",-1),G={class:"col-12 col-md-8"},B={class:"row mb-2"},F={class:"col-12  mb-2"},N=Object(a["f"])("label",{for:"newTitle",class:"form-label d-block"},"商品名稱",-1),R={class:"col-12 col-md-6  mb-2"},q=Object(a["f"])("label",{for:"newCategory",class:"form-label d-block"},"分類",-1),H={class:"col-12 col-md-6  mb-2"},K=Object(a["f"])("label",{for:"newUnit",class:"form-label d-block"},"單位",-1),L={class:"col-12 col-md-6  mb-2"},Q=Object(a["f"])("label",{for:"newOrigin_price",class:"form-label d-block"},"原價",-1),W={class:"col-12 col-md-6  mb-3"},X=Object(a["f"])("label",{for:"newPrice",class:"form-label d-block"},"售價",-1),Y={class:"col-12 mb-2"},Z=Object(a["f"])("label",{for:"newContent",class:"form-label d-block"},"商品描述",-1),tt={class:"col-12 mb-3"},et=Object(a["f"])("label",{for:"newDescription",class:"form-label d-block"},"說明內容",-1),ct={class:"col-12"},at={class:"form-check"},ot=Object(a["f"])("label",{class:"form-check-label  d-block",for:"is_enabledCheck"}," 是否啟用 ",-1),lt={class:"modal-footer"},rt=Object(a["f"])("button",{type:"button",class:"btn border-primary","data-bs-dismiss":"modal"},"取消",-1);function nt(t,e,c,o,l,r){return Object(a["r"])(),Object(a["d"])("div",z,[Object(a["f"])("div",C,[Object(a["f"])("div",T,[Object(a["f"])("h5",_,[E,Object(a["e"])(" "+Object(a["z"])(c.modalTitle),1)]),$]),Object(a["f"])("div",I,[Object(a["f"])("div",D,[Object(a["f"])("div",V,[Object(a["f"])("div",J,[Object(a["f"])("div",S,[A,Object(a["I"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"newImgUrl",placeholder:"圖片網址","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.eidtProduct.imageUrl=t})},null,512),[[a["E"],l.eidtProduct.imageUrl,void 0,{lazy:!0,trim:!0}]])]),Object(a["f"])("img",{src:l.eidtProduct.image,alt:l.eidtProduct.title,class:"img-fluid rounded mb-4",title:l.eidtProduct.title},null,8,["src","alt","title"])]),Object(a["f"])("div",G,[Object(a["f"])("div",B,[Object(a["f"])("div",F,[N,Object(a["I"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"newTitle",placeholder:"商品名稱","onUpdate:modelValue":e[2]||(e[2]=function(t){return l.eidtProduct.title=t})},null,512),[[a["E"],l.eidtProduct.title,void 0,{lazy:!0,trim:!0}]])]),Object(a["f"])("div",R,[q,Object(a["I"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"newCategory",placeholder:"商品類別","onUpdate:modelValue":e[3]||(e[3]=function(t){return l.eidtProduct.category=t})},null,512),[[a["E"],l.eidtProduct.category,void 0,{lazy:!0,trim:!0}]])]),Object(a["f"])("div",H,[K,Object(a["I"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"newUnit",placeholder:"台","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.eidtProduct.unit=t})},null,512),[[a["E"],l.eidtProduct.unit,void 0,{lazy:!0,trim:!0}]])]),Object(a["f"])("div",L,[Q,Object(a["I"])(Object(a["f"])("input",{type:"number",class:"form-control",id:"newOrigin_price",placeholder:"20000","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.eidtProduct.origin_price=t})},null,512),[[a["E"],l.eidtProduct.origin_price,void 0,{number:!0,lazy:!0}]])]),Object(a["f"])("div",W,[X,Object(a["I"])(Object(a["f"])("input",{type:"number",class:"form-control",id:"newPrice",placeholder:"20000","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.eidtProduct.price=t})},null,512),[[a["E"],l.eidtProduct.price,void 0,{number:!0,lazy:!0}]])]),Object(a["f"])("div",Y,[Z,Object(a["I"])(Object(a["f"])("textarea",{class:"form-control",id:"newContent",rows:"3",placeholder:"商品描述","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.eidtProduct.content=t})},null,512),[[a["E"],l.eidtProduct.content,void 0,{lazy:!0}]])]),Object(a["f"])("div",tt,[et,Object(a["I"])(Object(a["f"])("textarea",{class:"form-control",id:"newDescription",rows:"3",placeholder:"說明內容","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.eidtProduct.description=t})},null,512),[[a["E"],l.eidtProduct.description,void 0,{lazy:!0}]])]),Object(a["f"])("div",ct,[Object(a["f"])("div",at,[Object(a["I"])(Object(a["f"])("input",{class:"form-check-input",type:"checkbox",id:"is_enabledCheck","onUpdate:modelValue":e[9]||(e[9]=function(t){return l.eidtProduct.is_enabled=t}),value:l.eidtProduct.is_enabled},null,8,["value"]),[[a["C"],l.eidtProduct.is_enabled,void 0,{lazy:!0,trim:!0}]]),ot])])])])])])]),Object(a["f"])("div",lt,[rt,Object(a["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[10]||(e[10]=Object(a["J"])((function(t){return r.updateProduct("新增商品"==c.modalTitle?"add":"edit",l.eidtProduct.id)}),["prevent"]))}," 確認 ")])])])}var dt={data:function(){return{eidtProduct:{}}},watch:{newProduct:function(){this.eidtProduct=Object(y["a"])({},this.newProduct)}},props:["newProduct","modalTitle","products"],methods:{updateProduct:function(t){var e=this,c="pingu",a="https://vue-course-api.hexschool.io/api",o="".concat(a,"/").concat(c,"/admin/product"),l={};switch(t){case"add":this.eidtProduct.id=Date.now(),l={data:this.eidtProduct},x.a.post(o,l).then((function(t){t.data.success&&e.$emit("update","success",0,t.data.message)})).catch((function(t){e.$emit("getError","error",0,t.message)}));break;case"edit":o="".concat(a,"/").concat(c,"/admin/product/").concat(this.eidtProduct.id),l={data:this.eidtProduct},x.a.put(o,{data:this.eidtProduct}).then((function(t){t.data.success&&e.$emit("update","success",0,t.data.message)})).catch((function(t){e.$emit("getError","error",0,t.message)}));break;default:break}}}};dt.render=nt;var st=dt,it=c("6ff1"),bt=c("6cb0"),ut=c("15b0"),ft="pingu",mt="https://dev-vue-course-api.hexschool.io/api",pt=null,Ot=null,jt=null,ht=null,gt={data:function(){return{modalTitle:"",alertTitle:"",alertMessage:"",newProduct:{},products:[],pagination:{}}},mounted:function(){pt=new M["a"](this.$refs.productModal),Ot=new M["a"](this.$refs.delProductModal),ht=new M["a"](this.$refs.errorModal),jt=new M["a"](this.$refs.successModal,{backdrop:"static",keyboard:!1})},created:function(){this.getData()},components:{pageNavigation:U["a"],editModal:st,delModal:it["a"],successAlertModal:bt["a"],errorAlertModal:ut["a"]},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat(mt,"/").concat(ft,"/admin/products?page=").concat(e);x.a.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination):t.openModal("error",0,e.data.message)})).catch((function(e){t.openModal("error",0,e.message)}))},changeEnabled:function(t){var e=this;this.newProduct=Object(y["a"])({},t);var c="".concat(mt,"/").concat(ft,"/admin/product/").concat(this.newProduct.id);this.newProduct.is_enabled=!this.newProduct.is_enabled,x.a.put(c,{data:this.newProduct}).then((function(t){t.data.success?e.openModal("success",0,t.data.message):e.openModal("error",0,t.data.message)})).catch((function(t){e.openModal("error",0,t.message)}))},openModal:function(t,e,c){switch(this.alertMessage=c,t){case"new":this.modalTitle="新增商品",this.newProduct={},pt.show();break;case"edit":this.modalTitle="編輯商品",this.newProduct=Object(y["a"])({},e),pt.show();break;case"delete":this.modalTitle="刪除商品",this.newProduct=Object(y["a"])({},e),Ot.show();break;case"error":this.alertTitle="操作失敗",ht.show();break;case"success":this.alertTitle=c,this.alertMessage="",jt.show();break;default:break}},updateData:function(){jt.hide(),this.getData()}}};gt.render=P;e["default"]=gt},b0c0:function(t,e,c){var a=c("83ab"),o=c("9bf2").f,l=Function.prototype,r=l.toString,n=/^\s*function ([^ (]*)/,d="name";a&&!(d in l)&&o(l,d,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})},e01a:function(t,e,c){"use strict";var a=c("23e7"),o=c("83ab"),l=c("da84"),r=c("5135"),n=c("861d"),d=c("9bf2").f,s=c("e893"),i=l.Symbol;if(o&&"function"==typeof i&&(!("description"in i.prototype)||void 0!==i().description)){var b={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof u?new i(t):void 0===t?i():i(t);return""===t&&(b[e]=!0),e};s(u,i);var f=u.prototype=i.prototype;f.constructor=u;var m=f.toString,p="Symbol(test)"==String(i("test")),O=/^Symbol\((.*)\)[^)]+$/;d(f,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,e=m.call(t);if(r(b,t))return"";var c=p?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),a({global:!0,forced:!0},{Symbol:u})}}}]);
//# sourceMappingURL=chunk-a0007fe8.c3dfb140.js.map