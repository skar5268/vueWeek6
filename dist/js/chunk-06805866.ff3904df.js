(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06805866"],{"6cb0":function(t,e,c){"use strict";var a=c("7a23"),o={class:"modal-dialog  modal-dialog-centered"},l={class:"modal-content border-0 border-bottom border-success border-5"},r={class:"d-flex justify-content-between align-items-center\n          flex-column py-5 mb-0 text-success",role:"alert"},n=Object(a["f"])("p",{class:"material-icons-round h1 mb-3 alert-icon"},"check_circle",-1),d={class:"h3 fw-bold px-4"},s={class:"mb-4"};function i(t,e,c,i,b,u){return Object(a["r"])(),Object(a["d"])("div",o,[Object(a["f"])("div",l,[Object(a["f"])("div",r,[n,Object(a["f"])("p",d,Object(a["z"])(c.alertTitle),1),Object(a["f"])("p",s,Object(a["z"])(c.alertMessage),1),Object(a["f"])("button",{type:"button",class:"btn btn-success w-25 mt-2 mb-1",onClick:e[1]||(e[1]=Object(a["J"])((function(){return u.nextAction&&u.nextAction.apply(u,arguments)}),["prevent"]))}," 確認 ")])])])}var b={props:["alertTitle","alertMessage"],methods:{nextAction:function(){this.$emit("action")}}};b.render=i;e["a"]=b},e01a:function(t,e,c){"use strict";var a=c("23e7"),o=c("83ab"),l=c("da84"),r=c("5135"),n=c("861d"),d=c("9bf2").f,s=c("e893"),i=l.Symbol;if(o&&"function"==typeof i&&(!("description"in i.prototype)||void 0!==i().description)){var b={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof u?new i(t):void 0===t?i():i(t);return""===t&&(b[e]=!0),e};s(u,i);var f=u.prototype=i.prototype;f.constructor=u;var p=f.toString,j="Symbol(test)"==String(i("test")),O=/^Symbol\((.*)\)[^)]+$/;d(f,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,e=p.call(t);if(r(b,t))return"";var c=j?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),a({global:!0,forced:!0},{Symbol:u})}},e6dc:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={class:"container mt-5"},l={class:"row justify-content-center"},r={class:"col-10"},n={class:"table table-striped table-borderless table-hover align-middle mb-5"},d=Object(a["f"])("thead",{class:"text-center"},[Object(a["f"])("tr",null,[Object(a["f"])("th",{scope:"col"},"圖片"),Object(a["f"])("th",{scope:"col"},"商品名稱"),Object(a["f"])("th",{scope:"col"},"價格"),Object(a["f"])("th",{scope:"col",colspan:"2"})])],-1),s={style:{width:"150px",height:"150px"}},i={key:0},b={key:1},u={class:"h5 mt-1"},f=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"sort",-1),p=Object(a["e"])(" 查看更多 "),j=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"add",-1),O=Object(a["e"])(" 加到購物車 "),m={class:"modal fade",tabindex:"-1",id:"errorModal",ref:"errorModal"},g={class:"modal fade",tabindex:"-1",id:"successModal",ref:"successModal"},h={class:"modal fade",tabindex:"-1",id:"productModal",ref:"productModal"};function v(t,e,c,v,w,y){var M=Object(a["w"])("page-navigation"),P=Object(a["w"])("error-alert-modal"),k=Object(a["w"])("success-alert-modal"),x=Object(a["w"])("product-detail-modal");return Object(a["r"])(),Object(a["d"])(a["a"],null,[Object(a["f"])("div",o,[Object(a["f"])("div",l,[Object(a["f"])("div",r,[Object(a["f"])("table",n,[d,Object(a["f"])("tbody",null,[(Object(a["r"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(w.products,(function(t){return Object(a["r"])(),Object(a["d"])("tr",{key:t.id,class:"text-center"},[Object(a["f"])("td",s,[Object(a["f"])("img",{src:t.image,alt:t.title},null,8,["src","alt"])]),Object(a["f"])("td",null,Object(a["z"])(t.title),1),void 0==t.origin_price?(Object(a["r"])(),Object(a["d"])("td",i,"$ "+Object(a["z"])(t.price),1)):(Object(a["r"])(),Object(a["d"])("td",b,[Object(a["f"])("p",u,"$ "+Object(a["z"])(t.price),1)])),Object(a["f"])("td",null,[Object(a["f"])("button",{class:"btn btn-primary mb-2 mb-md-0",onClick:Object(a["J"])((function(e){return y.openModal("detail","",t)}),["prevent"])},[f,p],8,["onClick"]),Object(a["f"])("button",{class:"btn btn-danger mx-0 mx-md-2",onClick:Object(a["J"])((function(e){return y.addCart(t)}),["prevent"])},[j,O],8,["onClick"])])])})),128))])]),Object(a["f"])(M,{"total-page":w.pagination.total_pages,"current-page":w.pagination.current_page,onUpdate:y.getData},null,8,["total-page","current-page","onUpdate"])])])]),Object(a["f"])("div",m,[Object(a["f"])(P,{"alert-title":w.alertTitle,"alert-message":w.alertMessage},null,8,["alert-title","alert-message"])],512),Object(a["f"])("div",g,[Object(a["f"])(k,{"alert-title":w.alertTitle,"alert-message":w.alertMessage,onAction:y.closeModal},null,8,["alert-title","alert-message","onAction"])],512),Object(a["f"])("div",h,[Object(a["f"])(x,{"new-product":w.newProduct,"modal-title":w.modalTitle,onAdd:y.addCart},null,8,["new-product","modal-title","onAdd"])],512)],64)}var w=c("5530"),y=(c("99af"),c("bc3a")),M=c.n(y),P=c("7b17"),k=c("66dd"),x=(c("a4d3"),c("e01a"),{class:"modal-dialog modal-lg  modal-dialog-centered"}),T={class:"modal-content border-0"},z={class:"modal-header bg-primary py-2"},C={class:"modal-title fw-bold text-light lh-sm"},A=Object(a["f"])("span",{class:"material-icons-round align-bottom"},"sort",-1),$=Object(a["f"])("button",{type:"button",class:"btn text-light","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["f"])("span",{class:"material-icons-round lh-base"},"close")],-1),S={class:"modal-body py-4"},_={class:"container-fluid"},J={class:"row"},Q={class:"col-12 col-md-4"},D={class:"col-12 col-md-8"},U={class:"row mb-2"},q={class:"col-12  mb-2"},E={class:"badge rounded-pill bg-primary"},I={class:"col-12 mb-2"},N={key:0},V={class:"input-group col-12 mb-3"};function B(t,e,c,o,l,r){return Object(a["r"])(),Object(a["d"])("div",x,[Object(a["f"])("div",T,[Object(a["f"])("div",z,[Object(a["f"])("h5",C,[A,Object(a["e"])(" "+Object(a["z"])(c.modalTitle),1)]),$]),Object(a["f"])("div",S,[Object(a["f"])("div",_,[Object(a["f"])("div",J,[Object(a["f"])("div",Q,[Object(a["f"])("img",{src:l.editProduct.image,alt:l.editProduct.title,class:"img-fluid rounded mb-4",title:l.editProduct.title},null,8,["src","alt","title"])]),Object(a["f"])("div",D,[Object(a["f"])("div",U,[Object(a["f"])("h5",q,[Object(a["f"])("span",E,Object(a["z"])(l.editProduct.category),1)]),Object(a["f"])("div",I,[Object(a["f"])("p",null,"商品描述："+Object(a["z"])(l.editProduct.content),1),Object(a["f"])("p",null,"商品內容："+Object(a["z"])(l.editProduct.description),1),l.editProduct.origin_price==l.editProduct.price?(Object(a["r"])(),Object(a["d"])("h5",N,"只要 "+Object(a["z"])(l.editProduct.price)+" 元",1)):(Object(a["r"])(),Object(a["d"])(a["a"],{key:1},[Object(a["f"])("del",null,"原價 "+Object(a["z"])(l.editProduct.origin_price)+" 元",1),Object(a["f"])("h5",null,"現在只要 "+Object(a["z"])(l.editProduct.price)+" 元",1)],64))]),Object(a["f"])("div",V,[Object(a["I"])(Object(a["f"])("input",{type:"number",class:"form-control",id:"newQty",min:"1","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.newQty=t})},null,512),[[a["E"],l.newQty,void 0,{number:!0}]]),Object(a["f"])("button",{class:"btn btn-outline-secondary",type:"button","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=Object(a["J"])((function(t){return r.addCartModal(l.editProduct)}),["prevent"]))}," 加入購物車 ")])])])])])])])])}var F={data:function(){return{editProduct:{},newQty:1}},watch:{newProduct:function(){this.editProduct=Object(w["a"])({},this.newProduct)}},props:["newProduct","modalTitle"],methods:{addCartModal:function(t){this.$emit("add",t,this.newQty)}}};F.render=B;var G=F,H=c("6cb0"),K=c("15b0"),L=null,R=null,W=null,X="pingu",Y="https://dev-vue-course-api.hexschool.io/api",Z={data:function(){return{alertTitle:"",alertMessage:"",modalTitle:"",newProduct:{},newProductTitle:"",products:[],pagination:{}}},mounted:function(){L=new P["a"](this.$refs.productModal),R=new P["a"](this.$refs.errorModal),W=new P["a"](this.$refs.successModal,{backdrop:"static",keyboard:!1})},created:function(){this.getData()},components:{pageNavigation:k["a"],productDetailModal:G,successAlertModal:H["a"],errorAlertModal:K["a"]},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat(Y,"/").concat(X,"/products?page=").concat(e);M.a.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination):t.openModal("error",e.data.message)})).catch((function(e){t.openModal("error",e.message)}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="".concat(Y,"/").concat(X,"/cart"),o=t.id,l=c,r={data:{product_id:o,qty:l}};M.a.post(a,r).then((function(t){t.data.success?e.openModal("success",t.data.message):e.openModal("error",t.data.message)})).catch((function(t){e.openModal("error",t.message)}))},openModal:function(t,e,c){switch(this.alertMessage=e,t){case"detail":this.newProduct=Object(w["a"])({},c),this.modalTitle=this.newProduct.title,L.show();break;case"error":this.alertTitle="操作失敗",R.show();break;case"success":this.alertTitle=e,this.alertMessage="",W.show();break;default:break}},closeModal:function(){W.hide()}}};Z.render=v;e["default"]=Z}}]);
//# sourceMappingURL=chunk-06805866.ff3904df.js.map