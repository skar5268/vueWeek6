{"version":3,"sources":["webpack:///./src/views/Orders.vue","webpack:///./src/components/OrderDetailModal.vue","webpack:///./src/components/OrderDetailModal.vue?95f1","webpack:///./src/views/Orders.vue?2899","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","scope","colspan","tabindex","id","ref","orders","item","key","user","name","email","address","Date","create_at","getFullYear","getMonth","getDate","is_paid","openModal","total-page","pagination","total_pages","current-page","current_page","getOrders","new-order","newOrder","alert-title","alertTitle","alert-message","alertMessage","role","data-bs-dismiss","aria-label","editOrder","message","paid_date","products","product","title","num","total","tel","payment","data","watch","this","props","render","orderModal","errorModal","apiPath","baseUrl","mounted","$refs","created","components","pageNavigation","orderDetailModal","errorAlertModal","methods","url","a","get","then","res","success","catch","err","modal","show","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-0fc03156.ab52dc73.js","sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-10\">\n        <table class=\"table table-striped table-borderless table-hover align-middle mb-5\">\n          <thead class=\"text-center\">\n            <tr>\n              <th scope=\"col\">訂單編號</th>\n              <th scope=\"col\">聯絡人</th>\n              <th scope=\"col\">訂單品項</th>\n              <th scope=\"col\">訂單日期</th>\n              <th scope=\"col\">訂單狀態</th>\n              <th scope=\"col\" colspan=\"1\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in orders\" :key=\"item.id\" class=\"listContent\">\n              <td class=\"text-align-center\">{{ item.id }}</td>\n              <td class=\"text-align-center\">\n                {{ item.user.name }} <br />\n                {{ item.user.email }}\n              </td>\n              <td>{{ item.user.address }}</td>\n              <td>\n                {{ new Date(item.create_at * 1000).getFullYear() }} /\n                {{ new Date(item.create_at * 1000).getMonth() + 1 }} /\n                {{ new Date(item.create_at * 1000).getDate() }}\n              </td>\n              <td>{{ item.is_paid ? '已付款' : '未付款' }}</td>\n              <td class=\"text-align-center\">\n                <button class=\"btn btn-primary\" @click.prevent=\"openModal('detail', '', item)\">\n                  詳細\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <page-navigation\n          :total-page=\"pagination.total_pages\"\n          :current-page=\"pagination.current_page\"\n          @update=\"getOrders\"\n        >\n        </page-navigation>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"modal fade\" tabindex=\"-1\" id=\"orderModal\" ref=\"orderModal\">\n    <order-detail-modal :new-order=\"newOrder\"></order-detail-modal>\n  </div>\n\n  <!-- 操作失敗 -->\n  <div class=\"modal fade\" tabindex=\"-1\" id=\"errorModal\" ref=\"errorModal\">\n    <error-alert-modal :alert-title=\"alertTitle\" :alert-message=\"alertMessage\"></error-alert-modal>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { Modal } from 'bootstrap';\nimport pageNavigation from '../components/PageNavigation.vue';\nimport orderDetailModal from '../components/OrderDetailModal.vue';\nimport errorAlertModal from '../components/ErrorAlertModal.vue';\n\nlet orderModal = null;\nlet errorModal = null;\n\nconst apiPath = 'pingu';\nconst baseUrl = 'https://dev-vue-course-api.hexschool.io/api';\nexport default {\n  data() {\n    return {\n      alertTitle: '',\n      alertMessage: '',\n      orders: [],\n      newOrder: {},\n      pagination: {},\n    };\n  },\n  mounted() {\n    orderModal = new Modal(this.$refs.orderModal);\n    errorModal = new Modal(this.$refs.errorModal);\n  },\n  created() {\n    this.getOrders();\n  },\n  components: {\n    pageNavigation,\n    orderDetailModal,\n    errorAlertModal,\n  },\n  methods: {\n    getOrders(num = 1) {\n      const url = `${baseUrl}/${apiPath}/admin/orders?page=${num}`;\n      axios\n        .get(url)\n        .then((res) => {\n          if (!res.data.success) {\n            this.openModal('error', res.data.message, 0);\n          } else {\n            this.orders = res.data.orders;\n            this.pagination = res.data.pagination;\n          }\n        })\n        .catch((err) => {\n          this.openModal('error', 0, err.message);\n        });\n    },\n    openModal(modal, message, item) {\n      this.alertMessage = message;\n      switch (modal) {\n        case 'detail':\n          this.newOrder = { ...item };\n          orderModal.show();\n          break;\n\n        case 'error':\n          errorModal.show();\n          break;\n\n          // case 'success':\n          //   successAlertModal.show();\n          //   break;\n\n        default:\n          break;\n      }\n    },\n  },\n};\n</script>\n","<template>\n  <div class=\"modal-dialog modal-lg  modal-dialog-centered\">\n    <div class=\"modal-content border-0 border-bottom border-primary border-5\">\n      <div\n        class=\"d-flex justify-content-between align-items-center\n           flex-column p-5 mb-0 text-warning\"\n        role=\"alert\"\n      >\n        <ul class=\"list-group list-group-flush w-100 text-start\">\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              訂單編號\n            </h5>\n            <span class=\"px-3\">{{ editOrder.id }}</span>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              訂單日期\n            </h5>\n            <span class=\"px-3\">\n              {{ new Date(editOrder.create_at * 1000).getFullYear() }} /\n              {{ new Date(editOrder.create_at * 1000).getMonth() + 1 }} /\n              {{ new Date(editOrder.create_at * 1000).getDate() }}\n            </span>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              付款狀態\n            </h5>\n            <span class=\"px-3\">\n              {{ editOrder.is_paid ? '已付款' : '未付款' }}\n            </span>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              留言資訊\n            </h5>\n            <span class=\"px-3\">\n              {{ editOrder.message }}\n            </span>\n          </li>\n          <template v-if=\"!editOrder.paid_date\">\n            <li class=\"list-group-item py-3 d-flex disabled\">\n              <h5 class=\"px-2 mb-0\">付款日期</h5>\n            </li>\n          </template>\n          <template v-else>\n            <li class=\"list-group-item py-3 d-flex\">\n              <h5 class=\"px-2 mb-0\">付款日期</h5>\n              <span class=\"px-3\">\n                {{ new Date(editOrder.paid_date * 1000).getFullYear() }} /\n                {{ new Date(editOrder.paid_date * 1000).getMonth() + 1 }} /\n                {{ new Date(editOrder.paid_date * 1000).getDate() }}\n              </span>\n            </li>\n          </template>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">購買產品</h5>\n            <span class=\"px-3\">\n              <template v-for=\"item in editOrder.products\" :key=\"item.id\">\n                <p>{{ item.product.title }} * {{ item.product.num }}</p>\n              </template>\n            </span>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              消費金額\n            </h5>\n            <span class=\"px-3\">\n              {{ editOrder.total }}\n            </span>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              聯絡資訊\n            </h5>\n            <ul class=\"list-group list-group-flush text-start\">\n              <li class=\"list-group-item border-0 pt-0\">姓名：{{ editOrder.user.name }}</li>\n              <li class=\"list-group-item border-0\">E-mail：{{ editOrder.user.email }}</li>\n              <li class=\"list-group-item border-0\">聯絡地址：{{ editOrder.user.address }}</li>\n              <li class=\"list-group-item border-0\">連絡電話：{{ editOrder.user.tel }}</li>\n            </ul>\n          </li>\n          <li class=\"list-group-item py-3 d-flex\">\n            <h5 class=\"px-2 mb-0\">\n              付款方式\n            </h5>\n            <span class=\"px-3\">\n              {{ editOrder.user.payment }}\n            </span>\n          </li>\n        </ul>\n        <!-- <input type=\"text\" class=\"border-0\" readonly> -->\n        <button class=\"btn btn-primary w-25 mt-2 mb-1\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\n          確認\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      editOrder: { user: {} },\n    };\n  },\n  watch: {\n    newOrder() {\n      this.editOrder = { ...this.newOrder };\n    },\n  },\n  props: ['newOrder'],\n};\n</script>\n","import { render } from \"./OrderDetailModal.vue?vue&type=template&id=df61d6fc\"\nimport script from \"./OrderDetailModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderDetailModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=17587470\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}